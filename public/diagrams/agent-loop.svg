<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 300" fill="none">
  <style>
    text { font-family: 'Source Sans 3', 'Source Sans Pro', system-ui, sans-serif; }
    .box-title { font-size: 13px; font-weight: 700; }
    .box-desc { font-size: 11px; }
    .loop-label { font-size: 12px; font-weight: 600; }
  </style>

  <!-- Outer loop container -->
  <rect x="16" y="16" width="608" height="268" rx="16" fill="var(--bg-secondary)" stroke="var(--border)" stroke-width="1.5" stroke-dasharray="6,4"/>

  <!-- Context Window box -->
  <rect x="48" y="72" width="150" height="80" rx="10" fill="rgba(0,112,203,0.1)" stroke="rgba(0,112,203,0.4)" stroke-width="1.5"/>
  <text x="123" y="106" text-anchor="middle" class="box-title" fill="var(--heading)">Context</text>
  <text x="123" y="124" text-anchor="middle" class="box-desc" fill="var(--text-muted)">window</text>

  <!-- Arrow: Context → LLM -->
  <line x1="198" y1="112" x2="238" y2="112" stroke="var(--accent)" stroke-width="2"/>
  <polygon points="238,106 250,112 238,118" fill="var(--accent)"/>

  <!-- LLM box -->
  <rect x="250" y="72" width="150" height="80" rx="10" fill="rgba(40,200,64,0.1)" stroke="rgba(40,200,64,0.4)" stroke-width="1.5"/>
  <text x="325" y="102" text-anchor="middle" class="box-title" fill="var(--heading)">LLM</text>
  <text x="325" y="120" text-anchor="middle" class="box-desc" fill="var(--text-muted)">decide next</text>
  <text x="325" y="136" text-anchor="middle" class="box-desc" fill="var(--text-muted)">action</text>

  <!-- Arrow: LLM → Tool -->
  <line x1="400" y1="112" x2="440" y2="112" stroke="var(--accent)" stroke-width="2"/>
  <polygon points="440,106 452,112 440,118" fill="var(--accent)"/>

  <!-- Tool Call box -->
  <rect x="452" y="72" width="150" height="80" rx="10" fill="rgba(239,156,3,0.1)" stroke="rgba(239,156,3,0.4)" stroke-width="1.5"/>
  <text x="527" y="102" text-anchor="middle" class="box-title" fill="var(--heading)">Tool Call</text>
  <text x="527" y="120" text-anchor="middle" class="box-desc" fill="var(--text-muted)">execute</text>
  <text x="527" y="136" text-anchor="middle" class="box-desc" fill="var(--text-muted)">action</text>

  <!-- Return arrow: Tool → Context (going down and back) -->
  <path d="M527,152 L527,210 L123,210 L123,152" stroke="var(--accent)" stroke-width="2" fill="none"/>
  <polygon points="117,152 123,140 129,152" fill="var(--accent)"/>

  <!-- Label on return arrow -->
  <text x="325" y="232" text-anchor="middle" class="loop-label" fill="var(--text-muted)">result feeds back into context</text>

  <!-- Loop label -->
  <text x="320" y="262" text-anchor="middle" class="loop-label" fill="var(--accent)">Repeat until "done"</text>
</svg>
