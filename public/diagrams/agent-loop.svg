<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 674 280" fill="none">
  <style>
    text { font-family: 'Source Sans 3', 'Source Sans Pro', system-ui, sans-serif; }
    .box-title { font-size: 13px; font-weight: 700; }
    .box-desc { font-size: 11px; }
    .loop-label { font-size: 12px; font-weight: 600; }
  </style>

  <!-- Outer loop container -->
  <rect x="16" y="16" width="642" height="248" rx="16" fill="var(--bg-secondary)" stroke="var(--border)" stroke-width="1" stroke-dasharray="8,4" opacity="0.6"/>

  <!-- Context Window box -->
  <rect x="64" y="64" width="150" height="80" rx="12" fill="rgba(0,112,203,0.1)" stroke="rgba(0,112,203,0.4)" stroke-width="1.5"/>
  <text x="139" y="96" text-anchor="middle" class="box-title" fill="var(--heading)">Context</text>
  <text x="139" y="112" text-anchor="middle" class="box-desc" fill="var(--text-muted)">window</text>

  <!-- Arrow: Context → LLM -->
  <line x1="218" y1="104" x2="250" y2="104" stroke="var(--accent)" stroke-width="2"/>
  <polygon points="250,98 262,104 250,110" fill="var(--accent)"/>

  <!-- LLM box -->
  <rect x="262" y="64" width="150" height="80" rx="12" fill="rgba(40,200,64,0.1)" stroke="rgba(40,200,64,0.4)" stroke-width="1.5"/>
  <text x="337" y="88" text-anchor="middle" class="box-title" fill="var(--heading)">LLM</text>
  <text x="337" y="104" text-anchor="middle" class="box-desc" fill="var(--text-muted)">decide next</text>
  <text x="337" y="120" text-anchor="middle" class="box-desc" fill="var(--text-muted)">action</text>

  <!-- Arrow: LLM → Tool -->
  <line x1="416" y1="104" x2="448" y2="104" stroke="var(--accent)" stroke-width="2"/>
  <polygon points="448,98 460,104 448,110" fill="var(--accent)"/>

  <!-- Tool Call box -->
  <rect x="460" y="64" width="150" height="80" rx="12" fill="rgba(239,156,3,0.1)" stroke="rgba(239,156,3,0.4)" stroke-width="1.5"/>
  <text x="535" y="88" text-anchor="middle" class="box-title" fill="var(--heading)">Tool Call</text>
  <text x="535" y="104" text-anchor="middle" class="box-desc" fill="var(--text-muted)">execute</text>
  <text x="535" y="120" text-anchor="middle" class="box-desc" fill="var(--text-muted)">action</text>

  <!-- Return arrow: Tool → Context (going down and back) -->
  <path d="M535,144 L535,192 L139,192 L139,144" stroke="var(--accent)" stroke-width="2" fill="none"/>
  <polygon points="133,144 139,132 145,144" fill="var(--accent)"/>

  <!-- Label on return arrow -->
  <text x="337" y="216" text-anchor="middle" class="loop-label" fill="var(--text-muted)">result feeds back into context</text>

  <!-- Loop label -->
  <text x="337" y="240" text-anchor="middle" class="loop-label" fill="var(--accent)">Repeat until "done"</text>
</svg>
